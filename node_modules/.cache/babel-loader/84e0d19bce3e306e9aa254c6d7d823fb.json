{"ast":null,"code":"import _classCallCheck from\"/Users/sergey/Desktop/LinkUp_React_Final/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sergey/Desktop/LinkUp_React_Final/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/sergey/Desktop/LinkUp_React_Final/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/sergey/Desktop/LinkUp_React_Final/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sergey/Desktop/LinkUp_React_Final/my-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import fire from'./config/Fire';import'firebase/auth';import{createBrowserHistory}from\"history\";import{BrowserRouter,Router,Route,Switch,NavLink}from'react-router-dom';import Profile from'./Profile.js';import firebase from\"firebase/app\";import\"firebase/auth\";var LoginForm=/*#__PURE__*/function(_React$Component){_inherits(LoginForm,_React$Component);var _super=_createSuper(LoginForm);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_super.call(this,props);_this.onSubmit=function(){fire.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).then(function(){var provider=new firebase.auth.GoogleAuthProvider();fire.auth().signInWithPopup(provider).then(function(result){/** @type {firebase.auth.OAuthCredential} */var credential=result.credential;// This gives you a Google Access Token. You can use it to access the Google API.\nvar token=credential.accessToken;// The signed-in user info.\nvar user=result.user;// ...\n}).catch(function(error){console.log(error);});});};_this.state={error:'',user_name:''};_this.loginFunc=_this.loginFunc.bind(_assertThisInitialized(_this));_this.authListener=_this.authListener.bind(_assertThisInitialized(_this));_this.loginForm=_this.loginForm.bind(_assertThisInitialized(_this));_this.loginForm();return _this;}_createClass(LoginForm,[{key:\"componentDidMount\",value:function componentDidMount(){this.authListener();this.loginForm();}// showing user name when logged in\n},{key:\"authListener\",value:function authListener(){var _this2=this;fire.auth().onAuthStateChanged(function(user){if(user){_this2.setState({user:user});_this2.name();_this2.state.user_name?console.log('Your name is '+_this2.state.user_name):_this2.setState({user_name:user.name});_this2.setName();}else{_this2.setState({user:null});}});}// getting and showing current user name\n},{key:\"setName\",value:function setName(){var uid=fire.auth().currentUser.uid;var email=fire.auth().currentUser.email;var userName=this.state.user_name;userName?fire.database().ref('users/'+uid).update({user_name:userName}):console.log(\"NULL!!\");this.name();}},{key:\"name\",value:function name(){var _this3=this;var userId=fire.auth().currentUser.uid;var name=fire.database().ref('/users/'+userId).once('value').then(function(snapshot){var databaseName=snapshot.val()&&snapshot.val().user_name||'';_this3.setState({user_name:databaseName.toString()});});}// Google auth\n},{key:\"loginFunc\",// login with email and password\nvalue:function loginFunc(){var _this4=this;fire.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).then(function(){var email=document.querySelector('#email').value;var password=document.querySelector('#password').value;fire.auth().signInWithEmailAndPassword(email,password).then(function(u){console.log('Successfully Logged In.');}).catch(function(err){_this4.setState({error:err.toString()});});});}},{key:\"loginForm\",value:function loginForm(){return/*#__PURE__*/_jsxs(\"div\",{className:\"AvatarDiv\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0456\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",placeholder:\"\\u0412\\u0430\\u0448 Email..\",type:\"text\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",placeholder:\"\\u0412\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C..\",type:\"password\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:this.state.error}),/*#__PURE__*/_jsx(\"button\",{style:{margin:'10px'},onClick:this.loginFunc,children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"button\",{style:{margin:'10px'},children:\"\\u0417\\u0430\\u0440\\u0435\\u0454\\u0441\\u0442\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044F\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"GoogleImg\",src:\"https://raw.githubusercontent.com/react-native-community/react-native-google-signin/HEAD/img/signin-button.png\",onClick:this.onSubmit})})]});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:this.state.user?/*#__PURE__*/_jsx(Profile,{}):this.loginForm()});}}]);return LoginForm;}(React.Component);export default LoginForm;","map":{"version":3,"sources":["/Users/sergey/Desktop/LinkUp_React_Final/my-app/src/LoginForm.js"],"names":["React","fire","createBrowserHistory","BrowserRouter","Router","Route","Switch","NavLink","Profile","firebase","LoginForm","props","onSubmit","auth","setPersistence","Auth","Persistence","SESSION","then","provider","GoogleAuthProvider","signInWithPopup","result","credential","token","accessToken","user","catch","error","console","log","state","user_name","loginFunc","bind","authListener","loginForm","onAuthStateChanged","setState","name","setName","uid","currentUser","email","userName","database","ref","update","userId","once","snapshot","databaseName","val","toString","document","querySelector","value","password","signInWithEmailAndPassword","u","err","marginTop","color","margin","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport fire from './config/Fire';\nimport 'firebase/auth';\nimport { createBrowserHistory } from \"history\";\nimport { BrowserRouter, Router, Route, Switch, NavLink } from 'react-router-dom';\nimport Profile  from './Profile.js'\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nclass LoginForm extends React.Component {\n\n\nconstructor(props){\n  super(props)\n  this.state = {\n    error: '',\n    user_name: ''\n  }\n  this.loginFunc = this.loginFunc.bind(this);\n  this.authListener = this.authListener.bind(this);\n  this.loginForm = this.loginForm.bind(this);\n\n  this.loginForm();\n}\n\ncomponentDidMount() {\n  this.authListener();\n  this.loginForm();\n}\n\n// showing user name when logged in\nauthListener() {\n  fire.auth().onAuthStateChanged((user) => {\n    if (user) {\n      this.setState({ user });\n      this.name();\n      this.state.user_name ? (console.log('Your name is ' + this.state.user_name)) : \n      (this.setState({user_name: user.name}));\n      this.setName();\n    } else {\n      this.setState({ user: null });\n    }\n  })\n}\n\n// getting and showing current user name\nsetName() {\n  const uid = fire.auth().currentUser.uid;\n  const email = fire.auth().currentUser.email;\n  const userName = this.state.user_name;\n  userName ?  (fire.database().ref('users/' + uid).update({user_name: userName})) : (console.log(\"NULL!!\"))\n  this.name();      \n  };\n\nname(){\n  const userId = fire.auth().currentUser.uid;\n  const name = fire.database().ref('/users/' + userId).once('value').then((snapshot) => {\n  const databaseName = (snapshot.val() && snapshot.val().user_name) || '';\n  this.setState({user_name: databaseName.toString()});\n  });\n  }\n\n\n// Google auth\nonSubmit = () => {\nfire.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION)\n.then(() => {\nvar provider = new firebase.auth.GoogleAuthProvider();\nfire.auth()\n.signInWithPopup(provider)\n.then((result) => {\n  /** @type {firebase.auth.OAuthCredential} */\n  var credential = result.credential;\n\n  // This gives you a Google Access Token. You can use it to access the Google API.\n  var token = credential.accessToken;\n  // The signed-in user info.\n  var user = result.user;\n  // ...\n\n}).catch((error) => {\n  console.log(error);\n});\n})\n}\n\n\n// login with email and password\nloginFunc() {\nfire.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION)\n.then(() => {\n  const email = document.querySelector('#email').value;\n  const password = document.querySelector('#password').value;\n  fire.auth().signInWithEmailAndPassword(email, password)\n  .then((u) => {\n    console.log('Successfully Logged In.');\n    })\n  .catch((err) => {\n    this.setState({error: err.toString()});\n  })\n  })\n}\n\n\nloginForm() {\nreturn (\n  <div className='AvatarDiv'>\n  <h3>Авторизація</h3>\n  <div>\n  <div>Email</div>\n  <input id=\"email\" placeholder=\"Ваш Email..\" type=\"text\"/>\n  </div>\n  <div>\n  <div style={{marginTop: '10px'}}>Password</div>\n  <input id=\"password\" placeholder=\"Ваш пароль..\" type=\"password\"/>\n  </div>\n  <div style = {{color: 'red'}}>{this.state.error}</div>\n  <button style={{margin: '10px'}} onClick={this.loginFunc}>Увійти</button>\n  <NavLink to='/signup'><button style={{margin: '10px'}}>Зареєструватися</button></NavLink>\n  <div><img className='GoogleImg' \n  src='https://raw.githubusercontent.com/react-native-community/react-native-google-signin/HEAD/img/signin-button.png' \n  onClick={this.onSubmit} /></div>\n  </div>\n  )\n  }\n\n\nrender(){\n return(\n  <div>\n  {this.state.user ? (<Profile />) : (this.loginForm())}\n  </div>\n  )\n }\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}