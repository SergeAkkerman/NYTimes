{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/sergey/Desktop/LinkUp_React_Final/my-app/src/LoginForm.js\";\nimport React from 'react';\nimport fire from './config/Fire';\nimport 'firebase/auth';\nimport { createBrowserHistory } from \"history\";\nimport { BrowserRouter, Router, Route, Switch, NavLink } from 'react-router-dom';\nimport Profile from './Profile.js';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\"; //fire.auth().signInWithRedirect(provider);\n\nclass LoginForm extends React.Component {\n  requestName() {\n    this.name();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = () => {\n      var provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider).then(result => {\n        /** @type {firebase.auth.OAuthCredential} */\n        var credential = result.credential; // This gives you a Google Access Token. You can use it to access the Google API.\n\n        var token = credential.accessToken; // The signed-in user info.\n\n        var user = result.user; // ...\n      }).catch(error => {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential; // ...\n      });\n    };\n\n    this.state = {\n      error: '',\n      user_name: ''\n    };\n    this.loginFunc = this.loginFunc.bind(this);\n    this.authListener = this.authListener.bind(this);\n    this.loginForm = this.loginForm.bind(this);\n    this.loginForm();\n  }\n\n  name() {\n    const userId = fire.auth().currentUser.uid;\n    const name = fire.database().ref('/users/' + userId).once('value').then(snapshot => {\n      const databaseName = snapshot.val() && snapshot.val().user_name || \"Error!\";\n      this.setState({\n        user_name: databaseName.toString()\n      });\n      console.log(databaseName.toString());\n    });\n  }\n\n  ChangeName() {\n    //fire.auth().onAuthStateChanged((user) => {\n    const uid = fire.auth().currentUser.uid;\n    const email = fire.auth().currentUser.email;\n    const userName = prompt('Your name');\n    userName ? fire.database().ref('users/' + uid).update({\n      user_name: userName\n    }) : console.log(\"NULL!!\");\n    this.name();\n  }\n\n  setName() {\n    //fire.auth().onAuthStateChanged((user) => {\n    const uid = fire.auth().currentUser.uid;\n    const email = fire.auth().currentUser.email;\n    const userName = prompt('Your name');\n    userName ? fire.database().ref('users/' + uid).update({\n      user_name: userName\n    }) : console.log(\"NULL!!\");\n    this.name();\n  }\n\n  authListener() {\n    fire.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          user\n        });\n      } else {\n        this.setState({\n          user: null\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.authListener();\n    this.loginForm();\n  }\n\n  loginFunc() {\n    const email = document.querySelector('#email').value;\n    const password = document.querySelector('#password').value;\n    fire.auth().signInWithEmailAndPassword(email, password).then(u => {\n      console.log('Successfully Logged In.');\n    }).catch(err => {\n      this.setState({\n        error: err.toString()\n      });\n    });\n  }\n\n  loginForm() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AvatarDiv\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0456\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"email\",\n          placeholder: \"\\u0412\\u0430\\u0448 Email..\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px'\n          },\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"password\",\n          placeholder: \"\\u0412\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C..\",\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red'\n        },\n        children: this.state.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          margin: '10px'\n        },\n        onClick: this.loginFunc,\n        children: \"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/signup\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            margin: '10px'\n          },\n          children: \"\\u0417\\u0430\\u0440\\u0435\\u0454\\u0441\\u0442\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.onSubmit,\n        children: \"Google\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.user ? /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }, this) : this.loginForm()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/sergey/Desktop/LinkUp_React_Final/my-app/src/LoginForm.js"],"names":["React","fire","createBrowserHistory","BrowserRouter","Router","Route","Switch","NavLink","Profile","firebase","LoginForm","Component","requestName","name","constructor","props","onSubmit","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","credential","token","accessToken","user","catch","error","errorCode","code","errorMessage","message","email","state","user_name","loginFunc","bind","authListener","loginForm","userId","currentUser","uid","database","ref","once","snapshot","databaseName","val","setState","toString","console","log","ChangeName","userName","prompt","update","setName","onAuthStateChanged","componentDidMount","document","querySelector","value","password","signInWithEmailAndPassword","u","err","marginTop","color","margin","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAO,eAAP;AACA,SAASC,oBAAT,QAAqC,SAArC;AACA,SAASC,aAAT,EAAwBC,MAAxB,EAAgCC,KAAhC,EAAuCC,MAAvC,EAA+CC,OAA/C,QAA8D,kBAA9D;AACA,OAAOC,OAAP,MAAqB,cAArB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP,C,CAGA;;AAEA,MAAMC,SAAN,SAAwBV,KAAK,CAACW,SAA9B,CAAwC;AAExCC,EAAAA,WAAW,GAAE;AACb,SAAKC,IAAL;AACC;;AAGCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;;AADgB,SAyCpBC,QAzCoB,GAyCT,MAAM;AACjB,UAAIC,QAAQ,GAAG,IAAIR,QAAQ,CAACS,IAAT,CAAcC,kBAAlB,EAAf;AACAV,MAAAA,QAAQ,CAACS,IAAT,GACGE,eADH,CACmBH,QADnB,EAEGI,IAFH,CAESC,MAAD,IAAY;AAChB;AACA,YAAIC,UAAU,GAAGD,MAAM,CAACC,UAAxB,CAFgB,CAIhB;;AACA,YAAIC,KAAK,GAAGD,UAAU,CAACE,WAAvB,CALgB,CAMhB;;AACA,YAAIC,IAAI,GAAGJ,MAAM,CAACI,IAAlB,CAPgB,CAQhB;AACD,OAXH,EAWKC,KAXL,CAWYC,KAAD,IAAW;AAClB;AACA,YAAIC,SAAS,GAAGD,KAAK,CAACE,IAAtB;AACA,YAAIC,YAAY,GAAGH,KAAK,CAACI,OAAzB,CAHkB,CAIlB;;AACA,YAAIC,KAAK,GAAGL,KAAK,CAACK,KAAlB,CALkB,CAMlB;;AACA,YAAIV,UAAU,GAAGK,KAAK,CAACL,UAAvB,CAPkB,CAQlB;AACD,OApBH;AAqBC,KAhEmB;;AAEhB,SAAKW,KAAL,GAAa;AACXN,MAAAA,KAAK,EAAE,EADI;AAEXO,MAAAA,SAAS,EAAE;AAFA,KAAb;AAIA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,SAAL,GAAiB,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAjB;AAEA,SAAKE,SAAL;AACD;;AAEH1B,EAAAA,IAAI,GAAE;AACN,UAAM2B,MAAM,GAAGvC,IAAI,CAACiB,IAAL,GAAYuB,WAAZ,CAAwBC,GAAvC;AACA,UAAM7B,IAAI,GAAGZ,IAAI,CAAC0C,QAAL,GAAgBC,GAAhB,CAAoB,YAAYJ,MAAhC,EAAwCK,IAAxC,CAA6C,OAA7C,EAAsDxB,IAAtD,CAA4DyB,QAAD,IAAc;AACtF,YAAMC,YAAY,GAAID,QAAQ,CAACE,GAAT,MAAkBF,QAAQ,CAACE,GAAT,GAAeb,SAAlC,IAAgD,QAArE;AACA,WAAKc,QAAL,CAAc;AAACd,QAAAA,SAAS,EAAEY,YAAY,CAACG,QAAb;AAAZ,OAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,YAAY,CAACG,QAAb,EAAZ;AACC,KAJY,CAAb;AAKC;;AAEDG,EAAAA,UAAU,GAAG;AACT;AACI,UAAMX,GAAG,GAAGzC,IAAI,CAACiB,IAAL,GAAYuB,WAAZ,CAAwBC,GAApC;AACA,UAAMT,KAAK,GAAGhC,IAAI,CAACiB,IAAL,GAAYuB,WAAZ,CAAwBR,KAAtC;AACA,UAAMqB,QAAQ,GAAGC,MAAM,CAAC,WAAD,CAAvB;AACAD,IAAAA,QAAQ,GAAKrD,IAAI,CAAC0C,QAAL,GAAgBC,GAAhB,CAAoB,WAAWF,GAA/B,EAAoCc,MAApC,CAA2C;AAACrB,MAAAA,SAAS,EAAEmB;AAAZ,KAA3C,CAAL,GAA2EH,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAnF;AACA,SAAKvC,IAAL;AACC;;AAET4C,EAAAA,OAAO,GAAG;AACN;AACI,UAAMf,GAAG,GAAGzC,IAAI,CAACiB,IAAL,GAAYuB,WAAZ,CAAwBC,GAApC;AACA,UAAMT,KAAK,GAAGhC,IAAI,CAACiB,IAAL,GAAYuB,WAAZ,CAAwBR,KAAtC;AACA,UAAMqB,QAAQ,GAAGC,MAAM,CAAC,WAAD,CAAvB;AACAD,IAAAA,QAAQ,GAAKrD,IAAI,CAAC0C,QAAL,GAAgBC,GAAhB,CAAoB,WAAWF,GAA/B,EAAoCc,MAApC,CAA2C;AAACrB,MAAAA,SAAS,EAAEmB;AAAZ,KAA3C,CAAL,GAA2EH,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAnF;AACA,SAAKvC,IAAL;AACC;;AA4BPyB,EAAAA,YAAY,GAAG;AACbrC,IAAAA,IAAI,CAACiB,IAAL,GAAYwC,kBAAZ,CAAgChC,IAAD,IAAU;AACvC,UAAIA,IAAJ,EAAU;AACR,aAAKuB,QAAL,CAAc;AAAEvB,UAAAA;AAAF,SAAd;AACD,OAFD,MAEO;AACL,aAAKuB,QAAL,CAAc;AAAEvB,UAAAA,IAAI,EAAE;AAAR,SAAd;AACD;AACF,KAND;AAOD;;AAECiC,EAAAA,iBAAiB,GAAG;AACpB,SAAKrB,YAAL;AACA,SAAKC,SAAL;AACD;;AAEDH,EAAAA,SAAS,GAAG;AACV,UAAMH,KAAK,GAAG2B,QAAQ,CAACC,aAAT,CAAuB,QAAvB,EAAiCC,KAA/C;AACA,UAAMC,QAAQ,GAAGH,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAArD;AACA7D,IAAAA,IAAI,CAACiB,IAAL,GAAY8C,0BAAZ,CAAuC/B,KAAvC,EAA8C8B,QAA9C,EACC1C,IADD,CACO4C,CAAD,IAAO;AACXd,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,KAHD,EAICzB,KAJD,CAIQuC,GAAD,IAAS;AACd,WAAKjB,QAAL,CAAc;AAACrB,QAAAA,KAAK,EAAEsC,GAAG,CAAChB,QAAJ;AAAR,OAAd;AACD,KAND;AAOD;;AAGDX,EAAAA,SAAS,GAAG;AACd,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAA,gCACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA;AAAO,UAAA,EAAE,EAAC,OAAV;AAAkB,UAAA,WAAW,EAAC,4BAA9B;AAA4C,UAAA,IAAI,EAAC;AAAjD;AAAA;AAAA;AAAA;AAAA,gBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,eAMA;AAAA,gCACA;AAAK,UAAA,KAAK,EAAE;AAAC4B,YAAAA,SAAS,EAAE;AAAZ,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA;AAAO,UAAA,EAAE,EAAC,UAAV;AAAqB,UAAA,WAAW,EAAC,2DAAjC;AAAgD,UAAA,IAAI,EAAC;AAArD;AAAA;AAAA;AAAA;AAAA,gBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,cANA,eAUA;AAAK,QAAA,KAAK,EAAI;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAd;AAAA,kBAA+B,KAAKlC,KAAL,CAAWN;AAA1C;AAAA;AAAA;AAAA;AAAA,cAVA,eAWA;AAAQ,QAAA,KAAK,EAAE;AAACyC,UAAAA,MAAM,EAAE;AAAT,SAAf;AAAiC,QAAA,OAAO,EAAE,KAAKjC,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAXA,eAYA,QAAC,OAAD;AAAS,QAAA,EAAE,EAAC,SAAZ;AAAA,+BAAsB;AAAQ,UAAA,KAAK,EAAE;AAACiC,YAAAA,MAAM,EAAE;AAAT,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAtB;AAAA;AAAA;AAAA;AAAA,cAZA,eAaA;AAAQ,QAAA,OAAO,EAAE,KAAKrD,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAbA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAiBG;;AAGDsD,EAAAA,MAAM,GAAE;AAEP,wBACC;AAAA,gBACC,KAAKpC,KAAL,CAAWR,IAAX,gBAAmB,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cAAnB,GAAmC,KAAKa,SAAL;AADpC;AAAA;AAAA;AAAA;AAAA,YADD;AAKD;;AAjIsC;;AAoIxC,eAAe7B,SAAf","sourcesContent":["import React from 'react';\nimport fire from './config/Fire';\nimport 'firebase/auth';\nimport { createBrowserHistory } from \"history\";\nimport { BrowserRouter, Router, Route, Switch, NavLink } from 'react-router-dom';\nimport Profile  from './Profile.js'\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\n\n//fire.auth().signInWithRedirect(provider);\n\nclass LoginForm extends React.Component {\n\nrequestName(){\nthis.name();\n}\n\n\n  constructor(props){\n    super(props)\n    this.state = {\n      error: '',\n      user_name: ''\n    }\n    this.loginFunc = this.loginFunc.bind(this);\n    this.authListener = this.authListener.bind(this);\n    this.loginForm = this.loginForm.bind(this);\n\n    this.loginForm();\n  }\n\nname(){\nconst userId = fire.auth().currentUser.uid;\nconst name = fire.database().ref('/users/' + userId).once('value').then((snapshot) => {\nconst databaseName = (snapshot.val() && snapshot.val().user_name) || \"Error!\";\nthis.setState({user_name: databaseName.toString()});\nconsole.log(databaseName.toString());\n});\n}\n\nChangeName() {\n    //fire.auth().onAuthStateChanged((user) => {\n        const uid = fire.auth().currentUser.uid;\n        const email = fire.auth().currentUser.email;\n        const userName = prompt('Your name');\n        userName ?  (fire.database().ref('users/' + uid).update({user_name: userName})) : (console.log(\"NULL!!\"))\n        this.name();      \n        };\n\nsetName() {\n    //fire.auth().onAuthStateChanged((user) => {\n        const uid = fire.auth().currentUser.uid;\n        const email = fire.auth().currentUser.email;\n        const userName = prompt('Your name');\n        userName ?  (fire.database().ref('users/' + uid).update({user_name: userName})) : (console.log(\"NULL!!\"))\n        this.name();      \n        };\n\n\t\nonSubmit = () => {\nvar provider = new firebase.auth.GoogleAuthProvider();\nfirebase.auth()\n  .signInWithPopup(provider)\n  .then((result) => {\n    /** @type {firebase.auth.OAuthCredential} */\n    var credential = result.credential;\n\n    // This gives you a Google Access Token. You can use it to access the Google API.\n    var token = credential.accessToken;\n    // The signed-in user info.\n    var user = result.user;\n    // ...\n  }).catch((error) => {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    // The email of the user's account used.\n    var email = error.email;\n    // The firebase.auth.AuthCredential type that was used.\n    var credential = error.credential;\n    // ...\n  });\n}\n\n  authListener() {\n    fire.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.setState({ user });\n      } else {\n        this.setState({ user: null });\n      }\n    })\n  }\n\n    componentDidMount() {\n    this.authListener();\n    this.loginForm();\n  }\n\n  loginFunc() {\n    const email = document.querySelector('#email').value;\n    const password = document.querySelector('#password').value;\n    fire.auth().signInWithEmailAndPassword(email, password)\n    .then((u) => {\n      console.log('Successfully Logged In.');\n    })\n    .catch((err) => {\n      this.setState({error: err.toString()});\n    })\n  }\n\n\n  loginForm() {\nreturn (\n    <div className='AvatarDiv'>\n    <h3>Авторизація</h3>\n    <div>\n    <div>Email</div>\n    <input id=\"email\" placeholder=\"Ваш Email..\" type=\"text\"/>\n    </div>\n    <div>\n    <div style={{marginTop: '10px'}}>Password</div>\n    <input id=\"password\" placeholder=\"Ваш пароль..\" type=\"password\"/>\n    </div>\n    <div style = {{color: 'red'}}>{this.state.error}</div>\n    <button style={{margin: '10px'}} onClick={this.loginFunc}>Увійти</button>\n    <NavLink to='/signup'><button style={{margin: '10px'}}>Зареєструватися</button></NavLink>\n    <button onClick={this.onSubmit}>Google</button>\n    </div>\n  )\n  }\n\n\n  render(){\n\n   return(\n    <div>\n    {this.state.user ? (<Profile />) : (this.loginForm())}\n    </div>\n    )\n }\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}